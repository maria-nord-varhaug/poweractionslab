name: Deploy to powerplatform
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
  workflow_dispatch:
    inputs:
      version: 
        description: 'The dealer UI version to deploy, in format X.X.X, e.g. 0.1.2'
        required: true
      environment: 
        description: 'The environment to deploy to, e.g. weu-dev-develop'
        required: true

jobs: 
  Deploy-Dev:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v4

    - name: Setup .NET Core SDK
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '3.1.x' # SDK version to use; this version is sufficient for most scenari

    - name: Install Power Platform CLI
      uses: microsoft/powerplatform-actions/cli@v1
 
    - name: Authenticate
      run: |
        pac auth create --url ${{vars.SERVER_URL}} --applicationId ${{secrets.DV_CLIENT_ID}} --clientSecret ${{secrets.DV_CLIENT_SECRET}} --tenant ${{ secrets.DV_TENANT_ID }}


    # - name: Install solution into target environment
    #   uses: microsoft/powerplatform-actions/import-solution@v1
    #   with: 
    #     environment-url: sdsd
    #     solution-file:
    #     app-id: ${{ env.DV_CLIENT_ID }}
    #     client-secret: ${{ env.DV_CLIENT_SECRET }}
    #     tenant-id: ${{ env.DV_TENANT_ID }}
   


