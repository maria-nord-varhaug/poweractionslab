name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
  push:
    branches:
      - main
  workflow_dispatch:

env:
  DV_TENANT_ID = '${{secrets.DV_TENANT_ID}}'
  DV_SP_APP_ID = '${{secrets.DV_CLIENT_ID}}'
  DV_SP_APP_SECRET = '${{secrets.DV_CLIENT_SECRET}}'
  ENVIRONMENT_URL = '${{vars.SERVER_URL}}'
jobs: 
  Deploy-Dev:
    # defaults:
    #   run:
    #     shell: PowerShell # VERY important, this code does not work in powershell core
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v4
    - name: Install Power Platform Tools
      uses: microsoft/powerplatform-actions/actions-install@v1
 
    - name: Who am I?
      uses: microsoft/powerplatform-actions/WhoAmI@v1
      with:
        environment-url: ${{env.ENVIRONMENT_URL}}
        app-id: ${{ env.DV_SP_APP_ID }}
        client-secret: ${{ env.DV_SP_APP_SECRET }}
        tenant-id: ${{ env.DV_TENANT_ID }}

    # - name: Install solution into target environment
    #   uses: microsoft/powerplatform-actions/import-solution@v1
    #   with: 
    #     environment-url: sdsd
    #     solution-file:
    #     app-id: ${{ env.DV_CLIENT_ID }}
    #     client-secret: ${{ env.DV_CLIENT_SECRET }}
    #     tenant-id: ${{ env.DV_TENANT_ID }}
   


